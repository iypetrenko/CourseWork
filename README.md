# **Изучить аналогичные системы (2-3 программы):**
​Для разработки приложения по управлению личными финансами полезно изучить существующие аналоги, чтобы понять их функциональность и определить, какие возможности стоит реализовать в своём проекте. Рассмотрим подробно три популярных приложения: **GnuCash**, **HomeBank** и **KMyMoney**.​

### 1. **GnuCash**

**Вводимые данные пользователем:**

- **Финансовые транзакции:** пользователь вводит информацию о доходах и расходах, включая сумму, дату, категорию и описание.​
- **Банковские счета:** данные о различных счетах, таких как текущие, сберегательные, кредитные и инвестиционные.​
- **Инвестиции:** информация о портфеле акций и паях паевых инвестиционных фондов.​[ru.wikipedia.org](https://ru.wikipedia.org/wiki/GnuCash)

**Генерируемые отчёты и статистика:**

- **Балансовые отчёты:** показывают общее финансовое состояние пользователя.​
- **Отчёты о прибылях и убытках:** отражают доходы и расходы за определённый период.​
- **Кэш-флоу отчёты:** демонстрируют движение денежных средств.​
- **Отчёты по инвестициям:** анализируют доходность и распределение инвестиций.​

**Дополнительные функции:**

- **Транзакции по расписанию:** автоматическое создание регулярных платежей.​[ru.wikipedia.org](https://ru.wikipedia.org/wiki/KMyMoney)
- **Многовалютный учёт:** поддержка различных валют с автоматическим обновлением курсов.​
- **Импорт данных:** возможность импорта транзакций из банковских выписок в форматах QIF и OFX.​[ru.wikipedia.org+1ru.wikipedia.org+1ru.wikipedia.org+1](https://ru.wikipedia.org/wiki/HomeBank)
- **Поддержка двойной записи:** использование принципов бухгалтерского учёта для точного отслеживания финансов.​[ru.wikipedia.org+1ru.wikipedia.org+1ru.wikipedia.org+1](https://ru.wikipedia.org/wiki/GnuCash)

### 2. **HomeBank**

**Вводимые данные пользователем:**

- **Транзакции:** детали о доходах и расходах с указанием категории, даты и суммы.​
- **Счета:** информация о банковских счетах, кредитных картах и наличных средствах.​
- **Платежи по расписанию:** регулярные платежи и поступления.​

**Генерируемые отчёты и статистика:**

- **Анализ расходов:** графическое отображение распределения расходов по категориям.​
- **Тренды доходов и расходов:** показатели изменения финансовых потоков со временем.​
- **Прогнозирование бюджета:** оценка будущих финансовых состояний на основе текущих данных.​

**Дополнительные функции:**

- **Импорт и экспорт данных:** поддержка форматов QIF, OFX, QFX и CSV для обмена данными с другими финансовыми приложениями.​[ru.wikipedia.org](https://ru.wikipedia.org/wiki/HomeBank)
- **Обнаружение дубликатов:** автоматическое выявление повторяющихся транзакций.​
- **Настраиваемые отчёты:** возможность создания пользовательских отчётов под индивидуальные потребности.​

### 3. **KMyMoney**

**Вводимые данные пользователем:**

- **Финансовые записи:** информация о доходах, расходах, переводах между счетами.​
- **Счета:** данные о банковских счетах, инвестициях, кредитах и наличных.​
- **Категории и получатели:** определение категорий расходов/доходов и контрагентов.​

**Генерируемые отчёты и статистика:**

- **Балансовые отчёты:** отображение активов и пассивов пользователя.​
- **Отчёты о доходах и расходах:** детальный анализ финансовых потоков.​
- **Инвестиционные отчёты:** мониторинг портфеля и оценка его эффективности.​

**Дополнительные функции:**

- **Планирование платежей:** управление регулярными платежами и напоминания о них.​
- **Многовалютная поддержка:** ведение счетов в разных валютах с учётом курсовых разниц.​
- **Импорт данных:** совместимость с форматами QIF и GnuCash для переноса данных из других систем.​[ru.wikipedia.org](https://ru.wikipedia.org/wiki/KMyMoney)
- **Настраиваемые отчёты:** создание отчётов под специфические требования пользователя.​

### Вывод

Анализ этих приложений показывает, что ключевыми функциями для системы управления личными финансами являются:​

- **Учёт доходов и расходов:** возможность ввода и классификации транзакций.​
- **Управление счетами:** ведение различных типов счетов с отображением балансов.​
- **Генерация отчётов:** создание разнообразных отчётов для анализа финансового состояния.​
- **Планирование платежей:** настройка регулярных транзакций и напоминаний.​
- **Многовалютная поддержка:** ведение операций в разных валютах.​
- **Импорт/экспорт данных:** возможность обмена данными с другими финансовыми системами.​

Реализовав эти функции в своём проекте, вы создадите мощный инструмент для эффективного управления личными финансами.



### **Центральная тема:** Управление личными финансами

#### **1. Доходы**

- Основной доход
    - Зарплата
    - Бизнес-доход
    - Социальные выплаты
- Дополнительный доход
    - Фриланс
    - Инвестиции
    - Пассивный доход (аренда, дивиденды)

#### **2. Расходы**

- Обязательные
    - Коммунальные платежи
    - Продукты
    - Транспорт
    - Кредиты/ипотека
- Переменные
    - Развлечения
    - Одежда
    - Рестораны
    - Путешествия

#### **3. Бюджетирование**

- Методы
    - 50/30/20
    - Метод конвертов
    - Кассовый метод
- Контроль расходов
    - Планирование
    - Ограничение трат
    - Автоматизация платежей

#### **4. Сбережения и инвестиции**

- Краткосрочные (на непредвиденные расходы)
- Долгосрочные (на пенсию, крупные покупки)
- Виды инвестиций
    - Банковские вклады
    - Акции, облигации
    - Недвижимость
    - Криптовалюта

#### **5. Долги и кредиты**

- Управление кредитами
- Погашение долгов
- Кредитный рейтинг

#### **6. Финансовый анализ и отчетность**

- Анализ доходов и расходов
- Отчёты по категориям
- Оптимизация финансовых потоков

#### **7. Инструменты и приложения**

- GnuCash, HomeBank, KMyMoney
- Excel, Google Sheets
- Банковские приложения

![image](https://github.com/user-attachments/assets/c371f57c-3ad2-4e95-b813-d415df5f1b09)




### **Роли пользователей:**

1. **Обычный пользователь (зарегистрированный)**
    
    - Основной пользователь системы.
    - Может добавлять, редактировать и удалять финансовые операции.
    - Управляет категориями доходов и расходов.
    - Анализирует финансовые отчеты (графики, таблицы).
    - Настраивает цели сбережений и планирование бюджета.
    - Импортирует и экспортирует данные в **JSON**.
    - Использует напоминания о платежах.
    - Настраивает параметры конфиденциальности.
2. **Гость (незарегистрированный пользователь)**
    
    - Ограниченный доступ (демонстрационный режим).
    - Может просматривать интерфейс и функциональность.
    - Не может сохранять данные между сеансами.
    - Получает предложение зарегистрироваться.
3. **Администратор (опционально, если предполагается многопользовательская система)**
    
    - Управляет пользователями (создание, блокировка).
    - Контролирует настройки безопасности.
    - Обновляет системные параметры.
    - Просматривает логи действий пользователей.


### **Функциональность системы для каждой роли**

#### **1. Обычный пользователь (зарегистрированный)**

✅ **Управление финансами**

- Добавление, редактирование и удаление финансовых операций (доходы, расходы).
- Создание и настройка категорий расходов и доходов.
- Ведение нескольких счетов (наличные, карты, депозиты и т. д.).

✅ **Анализ и отчеты**

- Отображение статистики расходов/доходов в виде графиков и таблиц.
- Фильтрация данных по периодам, категориям и счетам.
- Прогнозирование бюджета на основе прошлых данных.

✅ **Планирование и цели**

- Создание финансовых целей (например, накопление на машину).
- Установка напоминаний о предстоящих платежах.
- Автоматический расчет времени достижения цели.

✅ **Импорт/экспорт данных**

- Сохранение данных в JSON/CSV/XML.
- Импорт финансовых данных из банковских выписок.

✅ **Настройки и безопасность**

- Изменение параметров конфиденциальности.
- Включение двухфакторной аутентификации (если предусмотрено).

---

#### **2. Гость (незарегистрированный пользователь)**

👀 **Ознакомительный режим**

- Просмотр интерфейса приложения.
- Доступ к демо-данным (фиктивные расходы/доходы).

🚫 **Ограничения**

- Нет возможности сохранять данные.
- Отсутствует доступ к персонализированным настройкам.
- Напоминание о необходимости регистрации.

---

#### **3. Администратор (если система многопользовательская)**

🛠 **Управление пользователями**

- Регистрация, блокировка и удаление аккаунтов.
- Восстановление доступа пользователям.

🔒 **Безопасность и контроль**

- Просмотр логов действий пользователей.
- Настройка уровней доступа.
- Обновление системы и управление настройками безопасности.

📊 **Системный анализ**

- Мониторинг использования системы (активные пользователи, количество операций).
- Оптимизация работы сервиса.
### **Тесты для главного экрана (Dashboard)**

#### Тест 1: Проверка отображения баланса

**Шаги:**

1. Пользователь открывает приложение.
2. На главном экране отображается актуальный баланс.
3. Кнопка "Обновить" доступна для обновления баланса.

**Ожидаемый результат:**

- Баланс отображается корректно, обновление происходит без ошибок.

---

#### Тест 2: Проверка добавления транзакции

**Шаги:**

4. Пользователь нажимает на кнопку "Добавить транзакцию".
5. Переходит на экран добавления дохода/расхода.
6. Вводит сумму, категорию и описание для транзакции.
7. Нажимает "Сохранить транзакцию".

**Ожидаемый результат:**

- Транзакция сохраняется, отображается в списке последних транзакций на главном экране.

---

#### Тест 3: Проверка отображения графика расходов

**Шаги:**

8. Пользователь на главном экране нажимает на кнопку "Посмотреть отчеты".
9. Переходит на экран отчетности.
10. Видит график расходов по категориям.

**Ожидаемый результат:**

- График корректно отображает расход по категориям, и все данные актуальны.

---

### **Тесты для экрана добавления транзакции**

#### Тест 4: Проверка добавления дохода

**Шаги:**

11. Пользователь нажимает "Добавить транзакцию".
12. Вводит сумму и выбирает тип "Доход".
13. Выбирает категорию (например, "Зарплата") и добавляет описание.
14. Нажимает кнопку "Сохранить транзакцию".

**Ожидаемый результат:**

- Доход добавляется в список транзакций, и баланс на главном экране обновляется.

---

#### Тест 5: Проверка добавления расхода

**Шаги:**

15. Пользователь нажимает "Добавить транзакцию".
16. Вводит сумму и выбирает тип "Расход".
17. Выбирает категорию (например, "Еда") и добавляет описание.
18. Нажимает кнопку "Сохранить транзакцию".

**Ожидаемый результат:**

- Расход добавляется в список транзакций, и баланс на главном экране обновляется.

---

#### Тест 6: Проверка отмены добавления транзакции

**Шаги:**

19. Пользователь нажимает "Добавить транзакцию".
20. Вводит сумму, но нажимает кнопку "Отмена".

**Ожидаемый результат:**

- Все данные удаляются, и пользователь возвращается на главный экран без сохранения транзакции.

---

### **Тесты для экрана категорий расходов**

#### Тест 7: Проверка добавления категории

**Шаги:**

21. Пользователь открывает экран категорий.
22. Нажимает кнопку "Добавить категорию".
23. Вводит название новой категории (например, "Транспорт").
24. Нажимает кнопку "Сохранить".

**Ожидаемый результат:**

- Категория появляется в списке, и пользователь может выбрать ее при добавлении новой транзакции.

---

#### Тест 8: Проверка удаления категории

**Шаги:**

25. Пользователь открывает экран категорий.
26. Выбирает категорию и нажимает кнопку "Удалить".
27. Подтверждает удаление.

**Ожидаемый результат:**

- Категория удаляется из списка, и она больше не доступна для выбора при добавлении транзакции.

---

### **Тесты для экрана отчетности**

#### Тест 9: Проверка фильтрации отчетов

**Шаги:**

28. Пользователь переходит на экран отчетности.
29. Нажимает кнопку "Фильтры".
30. Выбирает диапазон дат или категорию для фильтрации.
31. Применяет фильтры.

**Ожидаемый результат:**

- Отчеты обновляются с учетом выбранных фильтров, и отображаются только те данные, которые соответствуют критериям.

---

#### Тест 10: Проверка экспорта отчета

**Шаги:**

32. Пользователь переходит на экран отчетности.
33. Нажимает кнопку "Экспорт отчета".
34. Выбирает формат (например, PDF или Excel).

**Ожидаемый результат:**

- Отчет экспортируется в выбранном формате и сохраняется в выбранной папке.

---

### **Тесты для экрана настроек**

#### Тест 11: Проверка изменения валюты

**Шаги:**

35. Пользователь открывает экран настроек.
36. Нажимает на кнопку выбора валюты.
37. Выбирает другую валюту (например, доллар или евро).
38. Сохраняет изменения.

**Ожидаемый результат:**

- Валюта на главном экране и в транзакциях меняется на выбранную.

---

#### Тест 12: Проверка изменения темы

**Шаги:**

39. Пользователь открывает экран настроек.
40. Нажимает на переключатель "Тема" и выбирает темную или светлую тему.
41. Сохраняет изменения.

**Ожидаемый результат:**

- Приложение меняет тему на выбранную пользователем.

---

### **Тесты для общего интерфейса**

#### Тест 13: Проверка адаптивности интерфейса

**Шаги:**

42. Пользователь изменяет размер окна приложения (если это десктопная версия).
43. Проверяет, что элементы интерфейса подстраиваются под новый размер окна.

**Ожидаемый результат:**

- Интерфейс остается удобным и не выходит за пределы экрана.

---

#### Тест 14: Проверка плавности анимаций

**Шаги:**

44. Пользователь выполняет переходы между экранами.
45. Проверяет, что анимации переходов плавные и без задержек.

**Ожидаемый результат:**

- Все анимации плавные, переходы между экранами не вызывают задержек.

---



### 2. **Проектирование архитектуры и классов (4-6 недели)**

#### 1. **Определение классов предметной области**

Для приложения по управлению личными финансами можно выделить следующие основные классы:

1. **Transaction** (Транзакция)
    
    - **Свойства**:
        - `Date` (Дата) - дата транзакции.
        - `Amount` (Сумма) - сумма транзакции.
        - `Category` (Категория) - категория, к которой относится транзакция (например, доход, расход).
        - `Description` (Описание) - описание транзакции.
    - **Методы**:
        - `Validate()` - проверка корректности данных транзакции (например, положительная сумма).
        - `GetTransactionDetails()` - возвращает строку с полными данными о транзакции.
2. **Account** (Счет)
    
    - **Свойства**:
        - `Balance` (Баланс) - текущий баланс на счете.
        - `Transactions` (Транзакции) - коллекция всех транзакций, связанных с этим счетом.
    - **Методы**:
        - `AddTransaction(Transaction transaction)` - добавление транзакции.
        - `UpdateBalance()` - обновление баланса на основе транзакций.
        - `GetTransactionHistory()` - возвращает историю всех транзакций.
3. **Category** (Категория)
    
    - **Свойства**:
        - `Name` (Название) - название категории.
        - `Type` (Тип) - тип категории (доход, расход).
    - **Методы**:
        - `GetCategoryInfo()` - возвращает информацию о категории.
4. **Report** (Отчет)
    
    - **Свойства**:
        - `StartDate` (Дата начала) - начало периода отчетности.
        - `EndDate` (Дата окончания) - конец периода отчетности.
        - `Transactions` (Транзакции) - транзакции, которые попадают в отчет.
    - **Методы**:
        - `GenerateReport()` - генерирует отчет по заданным критериям (например, по датам, категориям).
        - `ExportToCSV()` - экспортирует отчет в CSV файл.
5. **User** (Пользователь)
    
    - **Свойства**:
        - `Name` (Имя) - имя пользователя.
        - `Email` (Электронная почта) - контактная информация.
        - `Accounts` (Счета) - список всех счетов пользователя.
    - **Методы**:
        - `AddAccount(Account account)` - добавление нового счета.
        - `GetTotalBalance()` - получение общей суммы всех счетов пользователя.
#### . **Определение классов предметной области**

1. **Базовый класс `Transaction`** (абстрактный)
    
    
    ```
    public abstract class Transaction {
        public DateTime Date { get; set; }
        public decimal Amount { get; protected set; }
        public Category Category { get; set; }
        public string Description { get; set; }
        
        public abstract void Validate(); // Абстрактный метод
        public virtual string GetTransactionDetails() {
            return $"{Date:dd.MM.yyyy} | {Amount:C} | {Category.Name}";
        }
    }
    ```
2. **Подклассы транзакций**
    
    ```
    public class IncomeTransaction : Transaction {
        public string Source { get; set; } // Например: "Работа", "Инвестиции"
        
        public override void Validate() {
            if (Amount <= 0) throw new ArgumentException("Сумма дохода должна быть положительной");
        }
    }
    
    public class ExpenseTransaction : Transaction {
        public string Recipient { get; set; } // Например: "Магазин X", "ООО Яндекс"
        
        public override void Validate() {
            if (Amount >= 0) throw new ArgumentException("Сумма расхода должна быть отрицательной");
        }
    }
    ```
    
3. **Класс `Account`** (с автоматическим обновлением баланса)
    
    ```
    public class Account {
        public decimal Balance { get; private set; }
        public List<Transaction> Transactions { get; } = new List<Transaction>();
        
        public event EventHandler<Transaction> OnTransactionAdded;
        
        public void AddTransaction(Transaction transaction) {
            transaction.Validate();
            Transactions.Add(transaction);
            UpdateBalance();
            OnTransactionAdded?.Invoke(this, transaction);
        }
        
        private void UpdateBalance() {
            Balance = Transactions.Sum(t => t.Amount);
        }
    }
    ```
    
4. **Остальные классы** (`Category`, `Report`, `User`) остаются без изменений.
    
#### 2. **Разделение интерфейсов**

1. **Интерфейс для работы с транзакциями**
    

    ```
    public interface ITransactionRepository {
        void AddTransaction(Transaction transaction);
        IEnumerable<Transaction> GetTransactionsByDate(DateTime start, DateTime end);
        IEnumerable<Transaction> GetTransactionsByCategory(Category category);
    }
    ```
    
2. **Интерфейс для генерации отчетов**
    
    ```
    public interface IReportGenerator {
        Report GenerateReport(DateTime startDate, DateTime endDate);
    }
    ```
    
3. **Интерфейс для экспорта отчетов**
    
    ```
    public interface IReportExporter {
        void ExportToCSV(Report report, string filePath);
        void ExportToPDF(Report report, string filePath);
    }
    ```
    
4. **Интерфейс для управления счетами**
    
    ```
    public interface IAccountManager {
        void AddAccount(Account account);
        void RemoveAccount(Account account);
        decimal GetTotalBalance(User user);
    }
    ```
---

#### 2. **Определение связей между классами**

Для связывания классов будем использовать принципы SOLID:

- **Single Responsibility Principle (SRP)**: каждый класс имеет одну ответственность. Например, класс `Transaction` только хранит данные о транзакциях, а класс `Account` управляет балансом и транзакциями.
- **Open/Closed Principle (OCP)**: классы должны быть открыты для расширений, но закрыты для изменений. Например, можно добавить новые типы отчетов, не изменяя существующие классы.
- **Liskov Substitution Principle (LSP)**: подклассы должны быть взаимозаменяемыми с их базовыми классами. Например, можно создать подклассы для разных типов транзакций (доход/расход).
- **Interface Segregation Principle (ISP)**: интерфейсы должны быть специфичными и не содержать лишних методов. Например, интерфейс для отчетности будет включать только методы, связанные с отчетами, а не с управлением счетами.
- **Dependency Inversion Principle (DIP)**: высокоуровневые модули не должны зависеть от низкоуровневых, но оба должны зависеть от абстракций. Например, класс `Report` может зависеть от интерфейса `ITransactionRepository`, который предоставляет доступ к транзакциям.

---

#### 3. **Создание UML-диаграммы классов**

Можно использовать инструменты, такие как Lucidchart или PlantUML, чтобы визуализировать архитектуру приложения. Ниже приведена упрощенная UML-диаграмма классов:
```
@startuml

' Интерфейсы
interface ITransactionRepository {
    + AddTransaction(Transaction)
    + GetTransactionsByDate(DateTime, DateTime)
    + GetTransactionsByCategory(Category)
}

interface IReportGenerator {
    + GenerateReport(DateTime, DateTime): Report
}

interface IReportExporter {
    + ExportToCSV(Report, string)
    + ExportToPDF(Report, string)
}

interface IAccountManager {
    + AddAccount(Account)
    + RemoveAccount(Account)
    + GetTotalBalance(User): decimal
}

' Классы
abstract class Transaction {
    + Date: DateTime
    + Amount: decimal
    + Category: Category
    + Description: string
    + Validate(): void
    + GetTransactionDetails(): string
}

class IncomeTransaction {
    + Source: string
    + Validate(): void
}

class ExpenseTransaction {
    + Recipient: string
    + Validate(): void
}

class Account {
    + Balance: decimal
    + AddTransaction(Transaction)
    + UpdateBalance(): void
}

class Report {
    + GenerateReport(): string
}

class User {
    + Name: string
    + Email: string
    + Accounts: List<Account>
}

' Наследование
Transaction <|-- IncomeTransaction
Transaction <|-- ExpenseTransaction

' Ассоциации
User "1" --> "*" Account
Account "1" --> "*" Transaction
Transaction "1" --> "1" Category
Report --> ITransactionRepository
Report ..|> IReportGenerator
Report ..|> IReportExporter
AccountManager ..|> IAccountManager

' Зависимости
class ReportGenerator {
    - ITransactionRepository _repository
    + GenerateReport(): Report
}
ReportGenerator --> ITransactionRepository

@enduml
```

Диаграмма показывает отношения между классами: один пользователь может иметь несколько счетов, каждый счет может содержать множество транзакций, а каждая транзакция относится к одной категории.
#### 4. **Объяснение изменений**

1. **Подклассы транзакций**:
    
    - Позволяют разделить логику валидации доходов/расходов
        
    - Добавляют специфичные поля (`Source`, `Recipient`)
        
    - Соответствуют **LSP** (можно использовать `IncomeTransaction` везде, где ожидается `Transaction`)
        
2. **Разделение интерфейсов**:
    
    - `IReportGenerator` и `IReportExporter` разделены по принципу **ISP**
        
    - Класс `Report` может реализовывать оба интерфейса независимо
        
3. **DI через интерфейсы**:
    
    - `ReportGenerator` зависит от `ITransactionRepository`, а не от конкретной реализации
        
    - Соответствует **DIP** (модули верхнего уровня не зависят от деталей)
        
4. **События в `Account`**:
    
    - Автоматическое обновление баланса через событие `OnTransactionAdded`
        
    - Возможность подписки других компонентов на изменения (например, обновление UI)
        

---

#### 5. **Пример использования**

```
// Создание транзакции
var salary = new IncomeTransaction {
    Date = DateTime.Now,
    Amount = 2500.00m,
    Category = new Category { Name = "Зарплата", Type = "Доход" },
    Source = "Компания ABC"
};

var rent = new ExpenseTransaction {
    Date = DateTime.Now,
    Amount = -700.00m,
    Category = new Category { Name = "Аренда", Type = "Расход" },
    Recipient = "ООО Рента"
};

// Работа с аккаунтом
var account = new Account();
account.AddTransaction(salary);
account.AddTransaction(rent);

Console.WriteLine($"Баланс: {account.Balance:C}"); // Вывод: Баланс: $1,800.00
```
Эта архитектура позволяет легко расширять систему: добавлять новые типы отчетов, форматы экспорта, источники данных - без изменения существующего кода.
---

#### 4. **Проектирование интерфейсов**

Если необходимо добавить интерфейсы для общих операций, можно создать следующие:

6. **ITransactionRepository**:
    
    - Определяет методы для работы с транзакциями, например:
        - `AddTransaction(Transaction transaction)`
        - `GetTransactionsByDateRange(DateTime startDate, DateTime endDate)`
        - `GetTransactionsByCategory(Category category)`
7. **IReportGenerator**:
    
    - Интерфейс для генерации отчетов, может быть реализован для разных типов отчетов:
        - `GenerateReport(DateTime startDate, DateTime endDate)`
        - `ExportToCSV()`
8. **IAccountManager**:
    
    - Определяет методы для управления счетами:
        - `AddAccount(Account account)`
        - `RemoveAccount(Account account)`
        - `GetAccountBalance(Account account)`




